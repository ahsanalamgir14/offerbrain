"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[298],{3298:(ot,p,a)=>{a.r(p),a.d(p,{ViewFormulasModule:()=>et});var m=a(6019),g=a(9133),y=a(6113),x=a(4625),T=a(7615),d=a(4382),f=a(4762),c=a(2968),u=a(2262),r=a(240),t=a(3668),h=a(5304),w=a(4099),Z=a(238);let S=(()=>{class o{constructor(e){this.apiService=e,this.formulasGetResponse=new w.X([]),this.formulasGetResponse$=this.formulasGetResponse.asObservable()}getFormulas(){return(0,f.mG)(this,void 0,void 0,function*(){return yield this.apiService.getData("formulas").then(e=>e.json()).then(e=>{this.orders=e,this.formulasGetResponse.next(e)}),this.orders})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(Z.s))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var V=a(1136),D=a(7635),N=a(4643),v=a(9009),A=a(904),C=a(86),J=a(3530),F=a(9112);function M(o,i){1&o&&t._UZ(0,"mat-progress-bar",17)}function Q(o,i){1&o&&(t.TgZ(0,"th",18),t.TgZ(1,"mat-checkbox",19),t.NdJ("click",function(n){return n.stopPropagation()}),t.qZA(),t.qZA())}function R(o,i){1&o&&(t.TgZ(0,"td",20),t.TgZ(1,"mat-checkbox",19),t.NdJ("click",function(n){return n.stopPropagation()}),t.qZA(),t.qZA())}function Y(o,i){1&o&&t._UZ(0,"th",21)}function G(o,i){if(1&o&&(t.TgZ(0,"td",22),t._UZ(1,"img",23),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.MGl("src","http://i.pravatar.cc/30?u=",e.name,"",t.LSH)}}function z(o,i){if(1&o&&(t.TgZ(0,"th",28),t._uU(1),t.qZA()),2&o){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.name,"")}}function P(o,i){if(1&o&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&o){const e=i.$implicit,n=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e[n.property]," ")}}function b(o,i){if(1&o&&(t.ynx(0,25),t.YNc(1,z,2,1,"th",26),t.YNc(2,P,2,1,"td",27),t.BQk()),2&o){const e=t.oxw().$implicit;t.Q6J("matColumnDef",e.property)}}function I(o,i){if(1&o&&(t.ynx(0),t.YNc(1,b,3,1,"ng-container",24),t.BQk()),2&o){const e=i.$implicit;t.xp6(1),t.Q6J("ngIf",e.isModelProperty)}}function U(o,i){1&o&&t._UZ(0,"th",30)}function B(o,i){if(1&o&&(t.TgZ(0,"td",20),t.TgZ(1,"button",31),t.NdJ("click",function(n){return n.stopPropagation()}),t.TgZ(2,"mat-icon"),t._uU(3,"more_horiz"),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("matMenuTriggerFor",e.actionsMenu)}}function H(o,i){1&o&&t._UZ(0,"tr",32)}function L(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"tr",33),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().updateCustomer(l)}),t.qZA()}}const O=[{path:"",component:(()=>{class o{constructor(e,n){this.dialog=e,this.viewFormulasService=n,this.isLoading=!1,this.totalRows=0,this.pageSize=25,this.currentPage=0,this.pageSizeOptions=[5,10,25,100],this.filters={},this.columns=[{name:"Checkbox",property:"checkbox",visible:!1},{name:"Name",property:"name",visible:!0,isModelProperty:!0},{name:"Shortcut",property:"shortcut_name",visible:!0,isModelProperty:!0},{name:"Campaign",property:"campaign_name",visible:!0,isModelProperty:!0},{name:"Column Name",property:"column_name",visible:!0,isModelProperty:!0},{name:"Expression",property:"expression",visible:!0,isModelProperty:!0},{name:"created At",property:"created_at",visible:!1,isModelProperty:!0}]}get visibleColumns(){return this.columns.filter(e=>e.visible).map(e=>e.property)}ngOnInit(){this.getSubscription=this.viewFormulasService.formulasGetResponse$.subscribe(e=>this.manageGetResponse(e)),this.getData(),this.dataSource=new r.by}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}pageChanged(e){this.pageSize=e.pageSize,this.currentPage=e.pageIndex,this.getData()}getData(){return(0,f.mG)(this,void 0,void 0,function*(){this.isLoading=!0,yield this.viewFormulasService.getFormulas().then(e=>{this.formulas=e.data,this.dataSource.data=e.data,setTimeout(()=>{this.paginator.pageIndex=this.currentPage,this.paginator.length=e.pag.count}),this.isLoading=!1},e=>{this.isLoading=!1})})}manageGetResponse(e){e.status?(this.formulas=e.data,this.dataSource.data=e.data,setTimeout(()=>{this.paginator.pageIndex=this.currentPage,this.paginator.length=e.pag.count}),this.isLoading=!1):this.isLoading=!1}onFilterChange(e){!this.dataSource||(e=(e=e.trim()).toLowerCase(),this.dataSource.filter=e)}ngOnDestroy(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h.uw),t.Y36(S))},o.\u0275cmp=t.Xpm({type:o,selectors:[["fury-view-formulas"]],viewQuery:function(e,n){if(1&e&&(t.Gf(c.NW,7),t.Gf(u.YE,7)),2&e){let s;t.iGM(s=t.CRH())&&(n.paginator=s.first),t.iGM(s=t.CRH())&&(n.sort=s.first)}},inputs:{columns:"columns"},decls:20,vars:11,consts:[["mode","simple"],["name","Formulas",3,"columns","filterChange"],["mode","indeterminate",4,"ngIf"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","checkbox"],["class","actions-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["matColumnDef","image"],["class","image-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","image-cell","mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageIndex","pageSize","pageSizeOptions","page"],["paginator",""],["mode","indeterminate"],["mat-header-cell","",1,"actions-cell"],["color","primary",3,"click"],["mat-cell","",1,"actions-cell"],["mat-header-cell","",1,"image-cell"],["mat-cell","",1,"image-cell"],[3,"src"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements",3,"click"]],template:function(e,n){1&e&&(t._uU(0," --\x3e "),t.TgZ(1,"fury-page-layout",0),t.TgZ(2,"fury-page-layout-content"),t.TgZ(3,"fury-list",1),t.NdJ("filterChange",function(l){return n.onFilterChange(l)}),t.YNc(4,M,1,0,"mat-progress-bar",2),t.TgZ(5,"table",3),t.ynx(6,4),t.YNc(7,Q,2,0,"th",5),t.YNc(8,R,2,0,"td",6),t.BQk(),t.ynx(9,7),t.YNc(10,Y,1,0,"th",8),t.YNc(11,G,2,1,"td",9),t.BQk(),t.YNc(12,I,2,1,"ng-container",10),t.ynx(13,11),t.YNc(14,U,1,0,"th",12),t.YNc(15,B,4,1,"td",6),t.BQk(),t.YNc(16,H,1,0,"tr",13),t.YNc(17,L,1,0,"tr",14),t.qZA(),t.TgZ(18,"mat-paginator",15,16),t.NdJ("page",function(l){return n.pageChanged(l)}),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("@fadeInUp",void 0),t.xp6(1),t.Q6J("columns",n.columns),t.xp6(1),t.Q6J("ngIf",n.isLoading),t.xp6(1),t.Q6J("dataSource",n.dataSource),t.xp6(7),t.Q6J("ngForOf",n.columns),t.xp6(4),t.Q6J("matHeaderRowDef",n.visibleColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.visibleColumns),t.xp6(1),t.Q6J("length",n.totalRows)("pageIndex",n.currentPage)("pageSize",n.pageSize)("pageSizeOptions",n.pageSizeOptions))},directives:[V.N,D.d,N.n,m.O5,r.BZ,u.YE,r.w1,r.fO,r.Dz,m.sg,r.as,r.nj,c.NW,v.pW,r.ge,A.oG,r.ev,u.nU,C.lW,J.p6,F.Hw,r.XQ,r.Gk],styles:[""]}),o})()}];let $=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[d.Bz.forChild(O)],d.Bz]}),o})();var j=a(9198),X=a(6153),E=a(138),W=a(9859),k=a(6400),K=a(8727),_=a(6731),q=a(3050),tt=a(8898);let et=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[m.ez,$,g.u5,g.UX,T.q,j.Z,X.o9,h.Is,E.c,C.ot,F.Ps,W.Fk,k.LD,K.FA,_.XK,q.To,tt.IJ,x.p,y.J,r.p0,c.TU,v.Cv]]}),o})()}}]);