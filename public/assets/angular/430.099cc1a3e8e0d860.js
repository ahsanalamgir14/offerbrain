"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[430],{4430:(mt,u,a)=>{a.r(u),a.d(u,{SticketDailyModule:()=>ct});var m=a(6019),f=a(9133),C=a(6113),T=a(4625),k=a(7615),h=a(4382),c=a(4762),p=a(2968),d=a(2262),s=a(240),Z=a(1168),x=a(9190),b=a(2919),A=a(2411),R=a(8735);class M{constructor(n){this.date=n.date,this.initials=n.initials,this.decline=n.decline,this.decline_per=n.decline_per,this.scrub_per=n.scrub_per,this.EOT_declines=n.EOT_declines,this.EOT_approved=n.EOT_approved,this.EOT_per=n.EOT_per}get decline_percentage(){let n="";return this.decline_per&&(n=(100*this.decline_per).toFixed(2)+"%"),n}}var O=a(7182),t=a(3668),g=a(5304),y=a(4099),N=a(238);let J=(()=>{class i{constructor(e){this.apiService=e,this.formulasGetResponse=new y.X([]),this.ticketsGetResponse=new y.X([]),this.formulasGetResponse$=this.formulasGetResponse.asObservable()}getFormulas(){return(0,c.mG)(this,void 0,void 0,function*(){return yield this.apiService.getData("formulas").then(e=>e.json()).then(e=>{this.orders=e,this.formulasGetResponse.next(e)}),this.orders})}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(N.s))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var G=a(9978),Q=a(1136),Y=a(7635),v=a(86),P=a(4643),S=a(9009),F=a(904),z=a(3530),D=a(9112);function E(i,n){1&i&&t._UZ(0,"mat-progress-bar",19)}function I(i,n){1&i&&(t.TgZ(0,"th",20),t.TgZ(1,"mat-checkbox",21),t.NdJ("click",function(o){return o.stopPropagation()}),t.qZA(),t.qZA())}function L(i,n){1&i&&(t.TgZ(0,"td",22),t.TgZ(1,"mat-checkbox",21),t.NdJ("click",function(o){return o.stopPropagation()}),t.qZA(),t.qZA())}function U(i,n){1&i&&t._UZ(0,"th",23)}function $(i,n){if(1&i&&(t.TgZ(0,"td",24),t._UZ(1,"img",25),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.MGl("src","http://i.pravatar.cc/30?u=",e.name,"",t.LSH)}}function j(i,n){if(1&i&&(t.TgZ(0,"th",30),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.name,"")}}function B(i,n){if(1&i&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&i){const e=n.$implicit,o=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e[o.property]," ")}}function H(i,n){if(1&i&&(t.ynx(0,27),t.YNc(1,j,2,1,"th",28),t.YNc(2,B,2,1,"td",29),t.BQk()),2&i){const e=t.oxw().$implicit;t.Q6J("matColumnDef",e.property)}}function X(i,n){if(1&i&&(t.ynx(0),t.YNc(1,H,3,1,"ng-container",26),t.BQk()),2&i){const e=n.$implicit;t.xp6(1),t.Q6J("ngIf",e.isModelProperty)}}function W(i,n){1&i&&t._UZ(0,"th",32)}function K(i,n){if(1&i&&(t.TgZ(0,"td",22),t.TgZ(1,"button",33),t.NdJ("click",function(o){return o.stopPropagation()}),t.TgZ(2,"mat-icon"),t._uU(3,"more_horiz"),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("matMenuTriggerFor",e.actionsMenu)}}function V(i,n){1&i&&t._UZ(0,"tr",34)}function w(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"tr",35),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().updateCustomer(l)}),t.qZA()}}const _=[{path:"",component:(()=>{class i{constructor(e,o,r){this.dialog=e,this.goldenTicketService=o,this.campaignService=r,this.subject$=new b.t(1),this.data$=this.subject$.asObservable(),this.isLoading=!1,this.totalRows=0,this.pageSize=25,this.currentPage=0,this.pageSizeOptions=[5,10,25,100],this.filters={},this.notyf=new O.Iq({types:[{type:"info",background:"#6495ED",icon:'<i class="fa-solid fa-clock"></i>'}]}),this.columns=[{name:"Checkbox",property:"checkbox",visible:!1},{name:"Date",property:"date",visible:!0,isModelProperty:!0},{name:"Initials",property:"initials",visible:!0,isModelProperty:!0},{name:"Decline",property:"decline",visible:!0,isModelProperty:!0},{name:"Decline %",property:"decline_percentage",visible:!0,isModelProperty:!0},{name:"Scrub %",property:"scrub_per",visible:!0,isModelProperty:!0},{name:"EOT Declines",property:"EOT_declines",visible:!0,isModelProperty:!0},{name:"EOT Approved",property:"EOT_approved",visible:!0,isModelProperty:!0},{name:"EOT %",property:"EOT_per",visible:!0,isModelProperty:!0}]}get visibleColumns(){return this.columns.filter(e=>e.visible).map(e=>e.property)}ngOnInit(){this.getSubscription=this.campaignService.sticketDailyResponse$.subscribe(e=>this.manageGetResponse(e)),this.getData(),this.dataSource=new s.by,this.data$.pipe((0,R.h)(e=>!!e)).subscribe(e=>{this.tickets=e,this.dataSource.data=e})}mapData(){return(0,A.of)(this.tickets.map(e=>new M(e)))}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}pageChanged(e){this.pageSize=e.pageSize,this.currentPage=e.pageIndex,this.getData()}getData(){return(0,c.mG)(this,void 0,void 0,function*(){this.isLoading=!0,yield this.campaignService.getDailySticket().then(e=>{this.tickets=e.data,this.dataSource.data=e.data,setTimeout(()=>{}),this.mapData().subscribe(o=>{this.subject$.next(o)}),this.isLoading=!1},e=>{this.isLoading=!1})})}manageGetResponse(e){}onFilterChange(e){!this.dataSource||(e=(e=e.trim()).toLowerCase(),this.dataSource.filter=e)}refreshToday(){return(0,c.mG)(this,void 0,void 0,function*(){this.notyf.open({type:"info",message:"Records will be refreshed soon..."}),this.isLoading=!0,yield this.campaignService.refreshDailySticket().then(e=>{this.tickets=e.data,this.dataSource.data=e.data,this.notyf.success("Records are updated successfully"),this.isLoading=!1},e=>{this.isLoading=!1})})}refreshAll(){return(0,c.mG)(this,void 0,void 0,function*(){this.notyf.open({type:"info",message:"Records will be refreshed soon..."}),this.isLoading=!0,yield this.campaignService.refreshAllDailySticket().then(e=>{this.tickets=e.data,this.dataSource.data=e.data,this.notyf.success("Records are updated successfully"),this.isLoading=!1},e=>{this.isLoading=!1})})}ngOnDestroy(){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(g.uw),t.Y36(J),t.Y36(G.U))},i.\u0275cmp=t.Xpm({type:i,selectors:[["fury-sticket-daily"]],viewQuery:function(e,o){if(1&e&&(t.Gf(p.NW,7),t.Gf(d.YE,7)),2&e){let r;t.iGM(r=t.CRH())&&(o.paginator=r.first),t.iGM(r=t.CRH())&&(o.sort=r.first)}},inputs:{columns:"columns"},decls:23,vars:11,consts:[["mode","simple"],["mat-raised-button","","color","accent",1,"mb",3,"click"],["mat-raised-button","","color","accent",1,"mb","ml",3,"click"],["name","Golden STicket (Daily)",3,"columns","filterChange"],["mode","indeterminate",4,"ngIf"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","checkbox"],["class","actions-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["matColumnDef","image"],["class","image-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","image-cell","mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageIndex","pageSize","pageSizeOptions","page"],["paginator",""],["mode","indeterminate"],["mat-header-cell","",1,"actions-cell"],["color","primary",3,"click"],["mat-cell","",1,"actions-cell"],["mat-header-cell","",1,"image-cell"],["mat-cell","",1,"image-cell"],[3,"src"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"fury-page-layout",0),t.TgZ(1,"fury-page-layout-content"),t.TgZ(2,"button",1),t.NdJ("click",function(){return o.refreshToday()}),t._uU(3,"Refresh Today"),t.qZA(),t.TgZ(4,"button",2),t.NdJ("click",function(){return o.refreshAll()}),t._uU(5,"Refresh All"),t.qZA(),t.TgZ(6,"fury-list",3),t.NdJ("filterChange",function(l){return o.onFilterChange(l)}),t.YNc(7,E,1,0,"mat-progress-bar",4),t.TgZ(8,"table",5),t.ynx(9,6),t.YNc(10,I,2,0,"th",7),t.YNc(11,L,2,0,"td",8),t.BQk(),t.ynx(12,9),t.YNc(13,U,1,0,"th",10),t.YNc(14,$,2,1,"td",11),t.BQk(),t.YNc(15,X,2,1,"ng-container",12),t.ynx(16,13),t.YNc(17,W,1,0,"th",14),t.YNc(18,K,4,1,"td",8),t.BQk(),t.YNc(19,V,1,0,"tr",15),t.YNc(20,w,1,0,"tr",16),t.qZA(),t.TgZ(21,"mat-paginator",17,18),t.NdJ("page",function(l){return o.pageChanged(l)}),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("@fadeInUp",void 0),t.xp6(5),t.Q6J("columns",o.columns),t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.Q6J("dataSource",o.dataSource),t.xp6(7),t.Q6J("ngForOf",o.columns),t.xp6(4),t.Q6J("matHeaderRowDef",o.visibleColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.visibleColumns),t.xp6(1),t.Q6J("length",o.totalRows)("pageIndex",o.currentPage)("pageSize",o.pageSize)("pageSizeOptions",o.pageSizeOptions))},directives:[Q.N,Y.d,v.lW,P.n,m.O5,s.BZ,d.YE,s.w1,s.fO,s.Dz,m.sg,s.as,s.nj,p.NW,S.pW,s.ge,F.oG,s.ev,d.nU,z.p6,D.Hw,s.XQ,s.Gk],styles:[".mb[_ngcontent-%COMP%]{margin-bottom:10px}.ml[_ngcontent-%COMP%]{margin-left:10px}"],data:{animation:[Z.M,x.X]}}),i})()}];let q=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[h.Bz.forChild(_)],h.Bz]}),i})();var tt=a(9198),et=a(6153),it=a(138),at=a(9859),nt=a(6400),ot=a(8727),st=a(6731),rt=a(3050),lt=a(8898);let ct=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[m.ez,q,f.u5,f.UX,k.q,tt.Z,et.o9,g.Is,it.c,v.ot,D.Ps,at.Fk,nt.LD,ot.FA,st.XK,rt.To,lt.IJ,T.p,C.J,s.p0,p.TU,S.Cv]]}),i})()}}]);