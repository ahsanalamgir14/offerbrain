"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[831],{1168:(g,m,o)=>{o.d(m,{M:()=>u});var l=o(9814);const u=(0,l.X$)("fadeInRight",[(0,l.eR)(":enter",[(0,l.oB)({transform:"translateX(-2vw)",opacity:0}),(0,l.jt)("0.4s cubic-bezier(0.35, 0, 0.25, 1)",(0,l.oB)({transform:"translateX(0)",opacity:1}))])])},9190:(g,m,o)=>{o.d(m,{X:()=>u});var l=o(9814);const u=(0,l.X$)("fadeInUp",[(0,l.eR)(":enter",[(0,l.oB)({transform:"translateY(3vh)",opacity:0}),(0,l.jt)("400ms cubic-bezier(0.35, 0, 0.25, 1)",(0,l.oB)({transform:"translateY(0)",opacity:1}))])])},831:(g,m,o)=>{o.r(m),o.d(m,{GoldenTicketModule:()=>ue});var l=o(6019),u=o(9133),_=o(6113),b=o(4625),A=o(7794),h=o(4382),d=o(4762),p=o(2968),f=o(2262),s=o(240),S=o(1168),x=o(9190),P=o(7182),e=o(3668),y=o(5304),D=o(4099),J=o(238);let N=(()=>{class n{constructor(t){this.apiService=t,this.formulasGetResponse=new D.X([]),this.formulasGetResponse$=this.formulasGetResponse.asObservable()}getFormulas(){return(0,d.mG)(this,void 0,void 0,function*(){return yield this.apiService.getData("formulas").then(t=>t.json()).then(t=>{this.orders=t,this.formulasGetResponse.next(t)}),this.orders})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(J.s))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var R=o(9978),Y=o(6044),F=o(7635),v=o(515),T=o(8167),C=o(6400),Z=o(86),O=o(1136),U=o(4643),G=o(6731),k=o(9009),B=o(904),Q=o(3530),M=o(9112);function I(n,r){if(1&n&&(e.TgZ(0,"mat-option",27),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.s9C("value",t),e.xp6(1),e.Oqu(t)}}function L(n,r){if(1&n&&(e.TgZ(0,"mat-option",27),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.s9C("value",t),e.xp6(1),e.Oqu(t)}}function z(n,r){1&n&&e._UZ(0,"mat-progress-bar",28)}function $(n,r){1&n&&(e.TgZ(0,"th",29),e.TgZ(1,"mat-checkbox",30),e.NdJ("click",function(i){return i.stopPropagation()}),e.qZA(),e.qZA())}function X(n,r){1&n&&(e.TgZ(0,"td",31),e.TgZ(1,"mat-checkbox",30),e.NdJ("click",function(i){return i.stopPropagation()}),e.qZA(),e.qZA())}function H(n,r){1&n&&e._UZ(0,"th",32)}function E(n,r){if(1&n&&(e.TgZ(0,"td",33),e._UZ(1,"img",34),e.qZA()),2&n){const t=r.$implicit;e.xp6(1),e.MGl("src","http://i.pravatar.cc/30?u=",t.name,"",e.LSH)}}function j(n,r){if(1&n&&(e.TgZ(0,"th",39),e._uU(1),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.name,"")}}function W(n,r){if(1&n&&(e.TgZ(0,"td",40),e._uU(1),e.qZA()),2&n){const t=r.$implicit,i=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t[i.property]," ")}}function K(n,r){if(1&n&&(e.ynx(0,36),e.YNc(1,j,2,1,"th",37),e.YNc(2,W,2,1,"td",38),e.BQk()),2&n){const t=e.oxw().$implicit;e.Q6J("matColumnDef",t.property)}}function V(n,r){if(1&n&&(e.ynx(0),e.YNc(1,K,3,1,"ng-container",35),e.BQk()),2&n){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.isModelProperty)}}function w(n,r){1&n&&e._UZ(0,"th",41)}function q(n,r){if(1&n&&(e.TgZ(0,"td",31),e.TgZ(1,"button",42),e.NdJ("click",function(i){return i.stopPropagation()}),e.TgZ(2,"mat-icon"),e._uU(3,"more_horiz"),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("matMenuTriggerFor",t.actionsMenu)}}function ee(n,r){1&n&&e._UZ(0,"tr",43)}function te(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"tr",44),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw().updateCustomer(c)}),e.qZA()}}const ne=[{path:"",component:(()=>{class n{constructor(t,i,a){this.dialog=t,this.goldenTicketService=i,this.campaignService=a,this.isLoading=!1,this.totalRows=0,this.pageSize=25,this.currentPage=0,this.pageSizeOptions=[5,10,25,100],this.filters={},this.month=null,this.months=["January","February","March","April","May","June","July","August","September","October","November","December"],this.year=null,this.years=[],this.notyf=new P.Iq,this.columns=[{name:"Checkbox",property:"checkbox",visible:!1},{name:"Month",property:"month",visible:!0,isModelProperty:!0},{name:"Year",property:"year",visible:!0,isModelProperty:!0},{name:"Initials",property:"initials",visible:!0,isModelProperty:!0},{name:"Rebills",property:"rebills",visible:!0,isModelProperty:!0},{name:"Cycle 1 %",property:"cycle_1_per",visible:!0,isModelProperty:!0},{name:"Cycle 2",property:"cycle_2",visible:!0,isModelProperty:!0},{name:"Cycle 2 %",property:"cycle_2_per",visible:!0,isModelProperty:!0},{name:"Cycle 3+",property:"cycle_3_plus",visible:!0,isModelProperty:!0},{name:"Cycle 3+ %",property:"cycle_3_plus_per",visible:!0,isModelProperty:!0},{name:"Avg Ticket",property:"avg_ticket",visible:!0,isModelProperty:!0},{name:"Revenue",property:"revenue",visible:!0,isModelProperty:!0},{name:"Refund",property:"refund",visible:!0,isModelProperty:!0},{name:"Refund Rate",property:"refund_rate",visible:!0,isModelProperty:!0},{name:"CBs",property:"CBs",visible:!0,isModelProperty:!0},{name:"CB %",property:"CB_per",visible:!0,isModelProperty:!0},{name:"CB $",property:"CB_currency",visible:!0,isModelProperty:!0},{name:"Fulfillment",property:"fulfillment",visible:!0,isModelProperty:!0},{name:"Processing",property:"processing",visible:!0,isModelProperty:!0},{name:"CPA",property:"cpa",visible:!0,isModelProperty:!0},{name:"CPA AVG",property:"cpa_avg",visible:!0,isModelProperty:!0},{name:"Net",property:"net",visible:!0,isModelProperty:!0},{name:"CLV",property:"clv",visible:!0,isModelProperty:!0}],this.getYearsArray(new Date)}get visibleColumns(){return this.columns.filter(t=>t.visible).map(t=>t.property)}getYearsArray(t){for(var i=t.getFullYear(),a=i;a>i-5;a--)this.years.unshift(a);for(a=i+1;a<i+5;a++)this.years.push(a);console.log("years",this.years)}ngOnInit(){this.getSubscription=this.campaignService.ticketsGetResponse$.subscribe(t=>this.manageGetResponse(t)),this.getData(),this.dataSource=new s.by}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}pageChanged(t){this.pageSize=t.pageSize,this.currentPage=t.pageIndex,this.getData()}getData(){return(0,d.mG)(this,void 0,void 0,function*(){this.isLoading=!0,yield this.campaignService.getGoldenTicketData().then(t=>{this.tickets=t.data,this.dataSource.data=t.data,setTimeout(()=>{}),this.isLoading=!1},t=>{this.isLoading=!1})})}manageGetResponse(t){t.status?(this.tickets=t.data,this.dataSource.data=t.data,setTimeout(()=>{}),this.isLoading=!1):this.isLoading=!1}onFilterChange(t){!this.dataSource||(t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t)}filterRecord(){return(0,d.mG)(this,void 0,void 0,function*(){null!=this.month||null!=this.year?yield this.campaignService.filterGoldenTicket(this.month,this.year).then(t=>{0!=t.data.length?(this.tickets=t.data,this.dataSource.data=t.data,this.isLoading=!1,this.notyf.success("Data Found Successfully")):this.notyf.error("Oops! No Data Found")},t=>{this.isLoading=!1,this.notyf.error(t.message)}):this.notyf.error("Please select filter options")})}addCustomMonth(){return(0,d.mG)(this,void 0,void 0,function*(){this.month&&this.year?yield this.campaignService.addCurrentMonth(this.month,this.year).then(t=>{1==t.status?(this.notyf.success(t.message),this.getData()):this.notyf.success(t.message)},t=>{this.isLoading=!1,this.notyf.error(t.message)}):this.notyf.error("Select Month and Year")})}addCurrentMonth(){return(0,d.mG)(this,void 0,void 0,function*(){var t=this.months[(new Date).getMonth()],i=(new Date).getFullYear();yield this.campaignService.addCurrentMonth(t,i).then(a=>{1==a.status?(this.notyf.success(a.message),this.getData()):this.notyf.success(a.message)},a=>{this.isLoading=!1,this.notyf.error(a.message)})})}resetFilters(){this.month=null,this.year=null}refresh(){this.resetFilters(),this.getData()}ngOnDestroy(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(y.uw),e.Y36(N),e.Y36(R.U))},n.\u0275cmp=e.Xpm({type:n,selectors:[["fury-golden-ticket"]],viewQuery:function(t,i){if(1&t&&(e.Gf(p.NW,7),e.Gf(f.YE,7)),2&t){let a;e.iGM(a=e.CRH())&&(i.paginator=a.first),e.iGM(a=e.CRH())&&(i.sort=a.first)}},inputs:{columns:"columns"},decls:44,vars:15,consts:[[1,"padding"],["current","Golden Ticket"],["fxLayout","","fxLayoutAlign","space-between center"],["appearance","fill"],[3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill",1,"pl-1"],["mat-raised-button","","color","warn",1,"ml-1",3,"click"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","","color","accent",1,"ml-1",3,"click"],["mode","simple"],["name","Golden Ticket",3,"columns","filterChange"],["mode","indeterminate",4,"ngIf"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","checkbox"],["class","actions-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["matColumnDef","image"],["class","image-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","image-cell","mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageIndex","pageSize","pageSizeOptions","page"],["paginator",""],[3,"value"],["mode","indeterminate"],["mat-header-cell","",1,"actions-cell"],["color","primary",3,"click"],["mat-cell","",1,"actions-cell"],["mat-header-cell","",1,"image-cell"],["mat-cell","",1,"image-cell"],[3,"src"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"fury-breadcrumbs",1),e.qZA(),e.TgZ(2,"fury-page-layout-content",2),e.TgZ(3,"div"),e.TgZ(4,"mat-form-field",3),e.TgZ(5,"mat-label"),e._uU(6,"Select Month"),e.qZA(),e.TgZ(7,"mat-select",4),e.NdJ("valueChange",function(c){return i.month=c}),e.YNc(8,I,2,2,"mat-option",5),e.qZA(),e.qZA(),e.TgZ(9,"mat-form-field",6),e.TgZ(10,"mat-label"),e._uU(11,"Select Year "),e.qZA(),e.TgZ(12,"mat-select",4),e.NdJ("valueChange",function(c){return i.year=c}),e.YNc(13,L,2,2,"mat-option",5),e.qZA(),e.qZA(),e.TgZ(14,"button",7),e.NdJ("click",function(){return i.filterRecord()}),e._uU(15,"Apply"),e.qZA(),e.TgZ(16,"button",7),e.NdJ("click",function(){return i.resetFilters()}),e._uU(17,"Reset"),e.qZA(),e.TgZ(18,"button",7),e.NdJ("click",function(){return i.addCustomMonth()}),e._uU(19,"Add"),e.qZA(),e.qZA(),e.TgZ(20,"div"),e.TgZ(21,"button",8),e.NdJ("click",function(){return i.refresh()}),e._uU(22,"Refresh"),e.qZA(),e.TgZ(23,"button",9),e.NdJ("click",function(){return i.addCurrentMonth()}),e._uU(24,"Add Current Month"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"fury-page-layout",10),e.TgZ(26,"fury-page-layout-content"),e.TgZ(27,"fury-list",11),e.NdJ("filterChange",function(c){return i.onFilterChange(c)}),e.YNc(28,z,1,0,"mat-progress-bar",12),e.TgZ(29,"table",13),e.ynx(30,14),e.YNc(31,$,2,0,"th",15),e.YNc(32,X,2,0,"td",16),e.BQk(),e.ynx(33,17),e.YNc(34,H,1,0,"th",18),e.YNc(35,E,2,1,"td",19),e.BQk(),e.YNc(36,V,2,1,"ng-container",20),e.ynx(37,21),e.YNc(38,w,1,0,"th",22),e.YNc(39,q,4,1,"td",16),e.BQk(),e.YNc(40,ee,1,0,"tr",23),e.YNc(41,te,1,0,"tr",24),e.qZA(),e.TgZ(42,"mat-paginator",25,26),e.NdJ("page",function(c){return i.pageChanged(c)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(7),e.Q6J("value",i.month),e.xp6(1),e.Q6J("ngForOf",i.months),e.xp6(4),e.Q6J("value",i.year),e.xp6(1),e.Q6J("ngForOf",i.years),e.xp6(13),e.Q6J("@fadeInUp",void 0),e.xp6(1),e.Q6J("columns",i.columns),e.xp6(1),e.Q6J("ngIf",i.isLoading),e.xp6(1),e.Q6J("dataSource",i.dataSource),e.xp6(7),e.Q6J("ngForOf",i.columns),e.xp6(4),e.Q6J("matHeaderRowDef",i.visibleColumns),e.xp6(1),e.Q6J("matRowDefColumns",i.visibleColumns),e.xp6(1),e.Q6J("length",i.totalRows)("pageIndex",i.currentPage)("pageSize",i.pageSize)("pageSizeOptions",i.pageSizeOptions))},directives:[Y.n,F.d,v.xw,v.Wh,T.KE,T.hX,C.gD,l.sg,Z.lW,O.N,U.n,l.O5,s.BZ,f.YE,s.w1,s.fO,s.Dz,s.as,s.nj,p.NW,G.ey,k.pW,s.ge,B.oG,s.ev,f.nU,Q.p6,M.Hw,s.XQ,s.Gk],styles:[".pl-1[_ngcontent-%COMP%]{padding-left:10px}.pt-1[_ngcontent-%COMP%]{padding-left:10px}.pb-1[_ngcontent-%COMP%]{padding-left:10px}.pr-1[_ngcontent-%COMP%]{padding-left:10px}.ml-1[_ngcontent-%COMP%]{margin-left:10px}"],data:{animation:[S.M,x.X]}}),n})()}];let oe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[h.Bz.forChild(ne)],h.Bz]}),n})();var ie=o(9198),ae=o(6153),re=o(138),le=o(9859),se=o(8727),ce=o(3050),me=o(8898);let ue=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[l.ez,oe,u.u5,u.UX,A.q,ie.Z,ae.o9,y.Is,re.c,Z.ot,M.Ps,le.Fk,C.LD,se.FA,G.XK,ce.To,me.IJ,b.p,_.J,s.p0,p.TU,k.Cv]]}),n})()}}]);